#!/bin/bash

function submit_it {
  sbatch --export=SAMPLENAME=$1,CHROM=$2,OUTDIR=$3,SEQERROR=$4,WINDOW=$5,NGAM=$6,NSNP=$7,COVERAGE=$8,RANDSD=$9,RLAM=${10},ASE=${11},ADNM=${12},SEA=${13},DNL=${14},DNA=${15},DNB=${16} sim_kw_20210208_lrgmem.sh
}

BASE_SAMPLENAME=sim2
BASE_CHROM=chrT
BASE_SEQERROR=0.05
BASE_WINDOW=3000
BASE_RANDSD=42
BASE_RLAM=1
BASE_ASE=TRUE
BASE_ADNM=TRUE
BASE_SEA=0.05
BASE_DNL=5
BASE_DNA=7.5
BASE_DNB=10

for NGAM in 3 15 50 150 500 1000 2500 5000 9600 12800 16000
do
  for NSNP in 5000 10000 30000 50000 100000
  do
    for COVERAGE in 0.0001 0.001 0.01 0.1 0.357 0.511 0.693 0.916 1.204 1.609 2.303
    do
      NEW_OUTDIR=${BASE_SAMPLENAME}_${BASE_CHROM}_${BASE_RANDSD}_${BASE_SEQERROR}_${BASE_ASE}_${BASE_SEA}_${BASE_WINDOW}_${NGAM}_${NSNP}_${COVERAGE}_${BASE_RLAM}_${BASE_ADNM}_${BASE_DNL}_${BASE_DNA}_${BASE_DNB}/
      mkdir ~/work-rmccoy22/kweave23/sc_transmission_distortion/run_sim2_20210208/$NEW_OUTDIR
      submit_it $BASE_SAMPLENAME $BASE_CHROM $NEW_OUTDIR $BASE_SEQERROR $BASE_WINDOW $NGAM $NSNP $COVERAGE $BASE_RANDSD $BASE_RLAM $BASE_ASE $BASE_ADNM $BASE_SEA $BASE_DNL $BASE_DNA $BASE_DNB
    done
  done
done
